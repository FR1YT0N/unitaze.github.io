<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сантехник - магазин сантехники</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { line-height: 1.6; color: #333; background-color: #f8fafc; }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        
        /* Header */
        header { background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%); color: white; padding: 20px 0; 
                position: sticky; top: 0; z-index: 1000; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 28px; font-weight: bold; letter-spacing: 1px; color: white; }
        nav ul { display: flex; list-style: none; }
        nav ul li { margin-left: 25px; }
        nav ul li a { color: white; text-decoration: none; font-weight: 500; transition: all 0.3s; }
        nav ul li a:hover { color: #bfdbfe; }
        .cart-count { background: #ef4444; color: white; border-radius: 50%; width: 20px; height: 20px; 
                     display: inline-flex; align-items: center; justify-content: center; font-size: 12px; }
        
        /* Hero */
        .hero { background: linear-gradient(rgba(30, 58, 138, 0.8), rgba(30, 58, 138, 0.8)); 
                padding: 120px 0; text-align: center; color: white; }
        .hero h1 { font-size: 48px; margin-bottom: 20px; }
        .hero p { font-size: 20px; max-width: 700px; margin: 0 auto; color: #e0f2fe; }
        
        /* Products */
        .products { padding: 80px 0; background: white; }
        .section-title { text-align: center; margin-bottom: 40px; font-size: 32px; color: #1e3a8a; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        .product-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
                       transition: all 0.3s; border: 1px solid #e2e8f0; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px rgba(0,0,0,0.1); }
        .product-image { height: 220px; background-size: cover; background-position: center; }
        .discount-badge { position: absolute; top: 10px; left: 10px; background: #ef4444; color: white; 
                          padding: 5px 10px; border-radius: 20px; font-size: 14px; font-weight: bold; }
        .product-info { padding: 20px; }
        .product-title { font-size: 20px; margin-bottom: 12px; color: #1e3a8a; }
        .product-price { font-weight: bold; color: #2563eb; font-size: 22px; }
        .old-price { text-decoration: line-through; color: #94a3b8; font-size: 16px; margin-left: 10px; }
        .product-actions { margin-top: 15px; display: flex; gap: 10px; }
        .btn { padding: 8px 12px; border-radius: 5px; font-weight: 500; cursor: pointer; border: none; }
        .btn-primary { background: #2563eb; color: white; }
        .btn-primary:hover { background: #1e40af; }
        
        /* Admin */
        .upload-section { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
                          margin: 30px auto; max-width: 600px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 500; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; 
                                                                     border-radius: 5px; }
        
        /* Reviews */
        .reviews { padding: 80px 0; background: #f8fafc; }
        .review-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .review-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        /* Contacts */
        .contacts { padding: 80px 0; background: white; }
        .contact-info { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .contact-card { background: #f8fafc; padding: 20px; border-radius: 8px; text-align: center; }
        
        /* Footer */
        footer { background: #1e3a8a; color: white; padding: 40px 0; text-align: center; }
        
        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                 background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal-content { background: white; padding: 20px; border-radius: 8px; width: 90%; max-width: 500px; }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-content { flex-direction: column; }
            nav ul { margin-top: 15px; }
            nav ul li { margin: 0 10px; }
            .hero h1 { font-size: 36px; }
            .hero p { font-size: 18px; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">Сантехник</div>
            <nav>
                <ul>
                    <li><a href="#home">Главная</a></li>
                    <li><a href="#products">Каталог</a></li>
                    <li><a href="#reviews">Отзывы</a></li>
                    <li><a href="#contacts">Контакты</a></li>
                    <li><a href="#about">О нас</a></li>
                    <li><a href="#" id="cartLink"><i class="fas fa-shopping-cart"></i> <span id="cartCount" class="cart-count" style="display: none;">0</span></a></li>
                    <li><a href="#" id="adminLink">Вход</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <!-- Hero -->
    <section class="hero" id="home">
        <div class="container">
            <h1>"Сантехник"</h1>
            <p>Широкий ассортимент сантехники по доступным ценам с быстрой доставкой</p>
        </div>
    </section>
    
    <!-- Products -->
    <section class="products" id="products">
        <div class="container">
            <h2 class="section-title">Наш каталог</h2>
            <div class="product-grid" id="productGrid"></div>
        </div>
    </section>
    
    <!-- Reviews -->
    <section class="reviews" id="reviews">
        <div class="container">
            <h2 class="section-title">Отзывы</h2>
            <div class="review-grid" id="reviewGrid"></div>
            <div style="margin-top: 30px; text-align: center;">
                <button id="addReviewBtn" class="btn btn-primary">Добавить отзыв</button>
            </div>
        </div>
    </section>
    
    <!-- About -->
    <section class="about" id="about">
        <div class="container">
            <h2 class="section-title">О нас</h2>
            <p>Мы - магазин "Сантехник", работаем на рынке с 2010 года. Наша компания предлагает широкий ассортимент сантехнического оборудования от ведущих производителей по доступным ценам. Мы гарантируем качество продукции и профессиональное обслуживание.</p>
        </div>
    </section>
    
    <!-- Contacts -->
    <section class="contacts" id="contacts">
        <div class="container">
            <h2 class="section-title">Контакты</h2>
            <div class="contact-info">
                <div class="contact-card">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Адрес</h3>
                    <p>г. Москва, ул. Примерная, д. 123</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-phone"></i>
                    <h3>Телефон</h3>
                    <p>+7 (123) 456-78-90</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-envelope"></i>
                    <h3>Email</h3>
                    <p>info@santehnik.ru</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-clock"></i>
                    <h3>Часы работы</h3>
                    <p>Пн-Пт: 9:00 - 20:00<br>Сб-Вс: 10:00 - 18:00</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Admin Panel (hidden by default) -->
    <section class="upload-section" id="upload" style="display: none;">
        <div class="container">
            <h2 class="section-title">Панель администратора</h2>
            <form id="uploadForm">
                <input type="hidden" id="productId">
                <div class="form-group">
                    <label for="productName">Название товара</label>
                    <input type="text" id="productName" required>
                </div>
                <div class="form-group">
                    <label for="productCategory">Категория</label>
                    <select id="productCategory" required>
                        <option value="Смесители">Смесители</option>
                        <option value="Унитазы">Унитазы</option>
                        <option value="Ванны">Ванны</option>
                        <option value="Душевые">Душевые</option>
                        <option value="Аксессуары">Аксессуары</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productDescription">Описание</label>
                    <textarea id="productDescription" required></textarea>
                </div>
                <div class="form-group">
                    <label for="productPrice">Цена (₽)</label>
                    <input type="number" id="productPrice" required>
                </div>
                <div class="form-group">
                    <label for="productOldPrice">Старая цена (₽)</label>
                    <input type="number" id="productOldPrice">
                </div>
                <div class="form-group">
                    <label for="productImage">Изображение (URL)</label>
                    <input type="text" id="productImage" required>
                </div>
                <button type="submit" class="btn btn-primary">Сохранить</button>
                <button type="button" id="cancelEdit" class="btn" style="margin-left: 10px;">Отмена</button>
            </form>
            <div id="adminProducts" style="margin-top: 30px;"></div>
        </div>
    </section>
    
    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Вход для администратора</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Пароль</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Войти</button>
            </form>
        </div>
    </div>
    
    <!-- Review Modal -->
    <div class="modal" id="reviewModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Добавить отзыв</h2>
            <form id="newReviewForm">
                <div class="form-group">
                    <label for="reviewName">Ваше имя</label>
                    <input type="text" id="reviewName" required>
                </div>
                <div class="form-group">
                    <label for="reviewText">Текст отзыва</label>
                    <textarea id="reviewText" required></textarea>
                </div>
                <div class="form-group">
                    <label for="reviewRating">Оценка</label>
                    <select id="reviewRating" required>
                        <option value="5">★★★★★</option>
                        <option value="4">★★★★☆</option>
                        <option value="3">★★★☆☆</option>
                        <option value="2">★★☆☆☆</option>
                        <option value="1">★☆☆☆☆</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Отправить</button>
            </form>
        </div>
    </div>
    
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDEXAMPLEEXAMPLEEXAMPLEEXAMPLE",
            authDomain: "santehnik-store.firebaseapp.com",
            databaseURL: "https://santehnik-store.firebaseio.com",
            projectId: "santehnik-store",
            storageBucket: "santehnik-store.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abc123abc123abc123abc1"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth();
        
        // DOM elements
        const adminLink = document.getElementById('adminLink');
        const uploadSection = document.getElementById('upload');
        const loginModal = document.getElementById('loginModal');
        const reviewModal = document.getElementById('reviewModal');
        const addReviewBtn = document.getElementById('addReviewBtn');
        
        // Check auth state
        auth.onAuthStateChanged(user => {
            if (user) {
                // User is signed in
                adminLink.textContent = 'Выйти';
                uploadSection.style.display = 'block';
                loadAdminProducts();
            } else {
                // User is signed out
                adminLink.textContent = 'Вход';
                uploadSection.style.display = 'none';
            }
        });
        
        // Admin login/logout
        adminLink.addEventListener('click', e => {
            e.preventDefault();
            if (auth.currentUser) {
                auth.signOut();
            } else {
                loginModal.style.display = 'flex';
            }
        });
        
        // Login form
        document.getElementById('loginForm').addEventListener('submit', e => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    loginModal.style.display = 'none';
                    showNotification('Вы успешно вошли!');
                })
                .catch(error => {
                    showNotification('Ошибка входа: ' + error.message, true);
                });
        });
        
        // Close modals
        document.querySelectorAll('.close-modal').forEach(btn => {
            btn.addEventListener('click', () => {
                loginModal.style.display = 'none';
                reviewModal.style.display = 'none';
            });
        });
        
        // Add review button
        addReviewBtn.addEventListener('click', () => {
            reviewModal.style.display = 'flex';
        });
        
        // Submit review
        document.getElementById('newReviewForm').addEventListener('submit', e => {
            e.preventDefault();
            const review = {
                name: document.getElementById('reviewName').value,
                text: document.getElementById('reviewText').value,
                rating: document.getElementById('reviewRating').value,
                date: new Date().toLocaleDateString()
            };
            
            database.ref('reviews').push(review)
                .then(() => {
                    showNotification('Отзыв добавлен!');
                    reviewModal.style.display = 'none';
                    loadReviews();
                });
        });
        
        // Product form
        document.getElementById('uploadForm').addEventListener('submit', e => {
            e.preventDefault();
            const product = {
                name: document.getElementById('productName').value,
                category: document.getElementById('productCategory').value,
                description: document.getElementById('productDescription').value,
                price: document.getElementById('productPrice').value,
                oldPrice: document.getElementById('productOldPrice').value || null,
                image: document.getElementById('productImage').value
            };
            
            const productId = document.getElementById('productId').value;
            
            if (productId) {
                // Update existing product
                database.ref('products/' + productId).update(product)
                    .then(() => {
                        showNotification('Товар обновлен!');
                        resetForm();
                        loadAdminProducts();
                        loadProducts();
                    });
            } else {
                // Add new product
                database.ref('products').push(product)
                    .then(() => {
                        showNotification('Товар добавлен!');
                        resetForm();
                        loadAdminProducts();
                        loadProducts();
                    });
            }
        });
        
        // Cancel edit
        document.getElementById('cancelEdit').addEventListener('click', resetForm);
        
        // Load products for customers
        function loadProducts() {
            database.ref('products').once('value', snapshot => {
                const products = snapshot.val();
                const productGrid = document.getElementById('productGrid');
                productGrid.innerHTML = '';
                
                for (const id in products) {
                    const product = products[id];
                    productGrid.innerHTML += `
                        <div class="product-card">
                            <div class="product-image" style="background-image: url('${product.image}')">
                                ${product.oldPrice ? `<span class="discount-badge">Скидка</span>` : ''}
                            </div>
                            <div class="product-info">
                                <h3 class="product-title">${product.name}</h3>
                                <p>${product.description}</p>
                                <div style="margin-top: 15px;">
                                    <span class="product-price">${product.price} ₽</span>
                                    ${product.oldPrice ? `<span class="old-price">${product.oldPrice} ₽</span>` : ''}
                                </div>
                                <div class="product-actions">
                                    <button class="btn btn-primary" onclick="addToCart('${id}')">
                                        <i class="fas fa-cart-plus"></i> В корзину
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }
            });
        }
        
        // Load products for admin
        function loadAdminProducts() {
            database.ref('products').once('value', snapshot => {
                const products = snapshot.val();
                const adminProducts = document.getElementById('adminProducts');
                adminProducts.innerHTML = '<h3>Товары в каталоге</h3>';
                
                for (const id in products) {
                    const product = products[id];
                    adminProducts.innerHTML += `
                        <div style="padding: 15px; border: 1px solid #ddd; margin-bottom: 10px; border-radius: 5px;">
                            <h4>${product.name} (${product.price} ₽)</h4>
                            <div style="display: flex; gap: 10px; margin-top: 10px;">
                                <button onclick="editProduct('${id}')" class="btn btn-primary">Редактировать</button>
                                <button onclick="deleteProduct('${id}')" class="btn btn-danger">Удалить</button>
                            </div>
                        </div>
                    `;
                }
            });
        }
        
        // Load reviews
        function loadReviews() {
            database.ref('reviews').once('value', snapshot => {
                const reviews = snapshot.val();
                const reviewGrid = document.getElementById('reviewGrid');
                reviewGrid.innerHTML = '';
                
                for (const id in reviews) {
                    const review = reviews[id];
                    reviewGrid.innerHTML += `
                        <div class="review-card">
                            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                <div style="width: 40px; height: 40px; background: #e0f2fe; border-radius: 50%; 
                                            display: flex; align-items: center; justify-content: center; margin-right: 10px;">
                                    ${review.name.charAt(0).toUpperCase()}
                                </div>
                                <div>
                                    <div style="font-weight: bold;">${review.name}</div>
                                    <div style="font-size: 12px; color: #666;">${review.date}</div>
                                </div>
                            </div>
                            <div style="color: #f59e0b; margin-bottom: 10px;">
                                ${'★'.repeat(review.rating)}${'☆'.repeat(5 - review.rating)}
                            </div>
                            <p>${review.text}</p>
                        </div>
                    `;
                }
            });
        }
        
        // Edit product
        function editProduct(id) {
            database.ref('products/' + id).once('value', snapshot => {
                const product = snapshot.val();
                document.getElementById('productId').value = id;
                document.getElementById('productName').value = product.name;
                document.getElementById('productCategory').value = product.category;
                document.getElementById('productDescription').value = product.description;
                document.getElementById('productPrice').value = product.price;
                document.getElementById('productOldPrice').value = product.oldPrice || '';
                document.getElementById('productImage').value = product.image;
                
                window.scrollTo({ top: uploadSection.offsetTop, behavior: 'smooth' });
            });
        }
        
        // Delete product
        function deleteProduct(id) {
            if (confirm('Вы уверены, что хотите удалить этот товар?')) {
                database.ref('products/' + id).remove()
                    .then(() => {
                        showNotification('Товар удален!');
                        loadAdminProducts();
                        loadProducts();
                    });
            }
        }
        
        // Reset form
        function resetForm() {
            document.getElementById('uploadForm').reset();
            document.getElementById('productId').value = '';
        }
        
        // Show notification
        function showNotification(message, isError = false) {
            const notification = document.createElement('div');
            notification.className = `notification ${isError ? 'error' : ''}`;
            notification.innerHTML = `<i class="fas fa-${isError ? 'exclamation-circle' : 'check-circle'}"></i> ${message}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }
        
        // Cart functionality
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        
        function addToCart(productId) {
            database.ref('products/' + productId).once('value', snapshot => {
                const product = snapshot.val();
                const existingItem = cart.find(item => item.id === productId);
                
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({
                        id: productId,
                        name: product.name,
                        price: product.price,
                        image: product.image,
                        quantity: 1
                    });
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                showNotification('Товар добавлен в корзину!');
            });
        }
        
        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            const cartCount = document.getElementById('cartCount');
            
            if (count > 0) {
                cartCount.textContent = count;
                cartCount.style.display = 'inline-flex';
            } else {
                cartCount.style.display = 'none';
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            loadReviews();
            updateCartCount();
        });
        
        // Make functions available globally
        window.addToCart = addToCart;
        window.editProduct = editProduct;
        window.deleteProduct = deleteProduct;
    </script>
</body>
</html>
